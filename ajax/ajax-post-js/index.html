<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>requête ajax post js</title>
    </head>
    <body>
        <input type="text" id="username_verif">
        <button id="ajaxButton" onclick="dataTransfer()"> Cliquez, cliquez</button>
        <script>

            function dataTransfer (){
                var userName = document.getElementById("username_verif").value;
                makeRequest('ajax.php', userName);
            };

            function makeRequest(url, userName) {
                var userName = userName;
                httpRequest = new XMLHttpRequest();

                if (!httpRequest) {
                    alert('Abandon :( Impossible de créer une instance de XMLHTTP');
                    return false;
                }

                httpRequest.onreadystatechange = alertContents; 
                httpRequest.open('POST', url);
                httpRequest.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
                httpRequest.send('userName=' + encodeURIComponent(userName));
            }

            function alertContents(){
                if (httpRequest.readyState === XMLHttpRequest.DONE) {
                    if (httpRequest.status === 200) {
                        alert(httpRequest.responseText);
                    } else {
                        alert('Il y a eu un problème avec la requête.');
                    }
                }
            }

        </script>
    </body>
</html>